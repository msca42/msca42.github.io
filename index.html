<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
<meta property="og:type" content="website">
<meta property="og:title" content="msca.blog">
<meta property="og:url" content="http://http://msca42.site/index.html">
<meta property="og:site_name" content="msca.blog">
<meta property="og:description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="msca.blog">
<meta name="twitter:description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">






  <link rel="canonical" href="http://http://msca42.site/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>msca.blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">msca.blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    

    

    <a href="/" rel="section">首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    

    

    <a href="/about/" rel="section">关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    

    

    <a href="/tags" rel="section">标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    

    

    <a href="/categories/" rel="section">分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    

    

    <a href="/archives/" rel="section">归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/29/mysql/高性能MySQL(八)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/29/mysql/高性能MySQL(八)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(八)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-29 22:43:10 / 修改时间：23:46:04" itemprop="dateCreated datePublished" datetime="2020-03-29T22:43:10+08:00">2020-03-29</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.3k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="复制的常见问题"><a href="#复制的常见问题" class="headerlink" title="复制的常见问题"></a>复制的常见问题</h3><ul>
<li>数据损坏或丢失错误<ul>
<li>主库意外关闭</li>
<li>备库意外关闭</li>
<li>主库二进制日志损坏</li>
<li>备库中继日志损坏</li>
<li>二进制日志与InnoDB事务日志不同步</li>
</ul>
</li>
<li>使用非事物型表</li>
<li>混合事物型和非事务型表</li>
<li>不确定语句</li>
<li>主库和备库使用不同的存储引擎</li>
<li>备库发生数据改变</li>
<li>不唯一的服务器ID</li>
<li>未定义的服务器ID</li>
<li>对未复制数据的依赖性</li>
<li>丢失的临时表</li>
<li>不复制所有的更新</li>
<li>InnoDB加锁读引起的锁争用</li>
<li>在主-主复制结构中写入两台主库</li>
<li>过大的复制延迟<ul>
<li>产生延迟方式<ul>
<li>突然产生延迟再跟上<ul>
<li>由于一条运行时间很长的查询导致</li>
</ul>
</li>
<li>稳定的延迟增加<ul>
<li>没有长时间运行查询时也会出现</li>
</ul>
</li>
</ul>
</li>
<li>备库优化方式(禁止额外工作，减少备库的负载)<ul>
<li>不要重复写操作中代价较高的部分</li>
<li>在复制之外并行写入</li>
<li>为复制线程预取缓存</li>
</ul>
</li>
</ul>
</li>
<li>来自主库过大的包</li>
<li>受限制的复制带宽</li>
<li>磁盘空间不足</li>
</ul>
<h3 id="MySQL复制的一些高级特性"><a href="#MySQL复制的一些高级特性" class="headerlink" title="MySQL复制的一些高级特性"></a>MySQL复制的一些高级特性</h3><ul>
<li>半同步复制<ul>
<li>确保备库拥有主库数据的拷贝，减少潜在的数据丢失危险</li>
</ul>
</li>
<li>复制心跳<ul>
<li>保证备库一直与主库相关联，避免悄无声息的断开连接</li>
</ul>
</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li>使用复制时需要注意项<ul>
<li>使用Percona Toolkit的pt-table-checksum以确定备库是主库的真实拷贝</li>
<li>监控复制以确定其正在运行并且没有落后于主库</li>
<li>理解复制的异步本质，并且设计你的应用以避免或容忍从备库读取脏的数据</li>
<li>在一个复制topo中不要写入超过一个服务器，把备库配置为只读，并降低权限以组织对数据的改变</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/21/mysql/高性能MySQL(七)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/21/mysql/高性能MySQL(七)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(七)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-21 21:43:10" itemprop="dateCreated datePublished" datetime="2020-03-21T21:43:10+08:00">2020-03-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-22 22:08:23" itemprop="dateModified" datetime="2020-03-22T22:08:23+08:00">2020-03-22</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">3.5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">3 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h2><h3 id="章节内容概述"><a href="#章节内容概述" class="headerlink" title="章节内容概述"></a>章节内容概述</h3><ul>
<li><p>介绍复制如何工作</p>
</li>
<li><p>讨论基本的复制服务搭建</p>
<ul>
<li>复制相关的配置</li>
<li>如何管理和优化复制服务器</li>
</ul>
</li>
<li><p>复制什么情况下会失败(准确性)</p>
</li>
<li><p>如何使其更好地工作</p>
</li>
</ul>
<h3 id="复制概述"><a href="#复制概述" class="headerlink" title="复制概述"></a>复制概述</h3><ul>
<li><p>MySQL复制方式</p>
<ul>
<li>基于行的复制(5.1)</li>
<li>基于语句的复制(逻辑复制3.23)</li>
</ul>
</li>
<li><p>复制解决的问题</p>
<ul>
<li>数据分布</li>
<li>负载均衡<ul>
<li>将读操作分布到多个服务器上，实现对读密集型应用的优化</li>
</ul>
</li>
<li>备份</li>
<li>高可用性和故障切换</li>
<li>MySQL升级测试</li>
</ul>
</li>
<li><p>复制如何工作</p>
<ul>
<li>概述<ul>
<li>在主库上把数据更改记录到二进制日志(Binary Log)中(这些记录被称为二进制日志事件)</li>
<li>备库将主库上的日志复制到自己的中继系统日志(Relay Log)中</li>
<li>备库读取中继日志中的事件，将其重放到备库数据上              </li>
</ul>
</li>
<li>具体描述<ul>
<li><strong>在主库上记录用二进制日志</strong><ul>
<li>在每次准备提交事务完成数据更新前，主库将数据更新的事件记录到二进制日志中。MySQL会按提交顺序记录二进制日志。在记录二进制日志后，主库会告诉存储引擎可以提交事务了</li>
</ul>
</li>
<li><strong>备库将主库的如今之日志复制到其本地的中继日志中</strong><ul>
<li>备库启动一个工作线程，称为I/O线程</li>
<li>I/O线程跟主库建立一个普通的客户端连接</li>
<li>主库上启动一个特殊的二进制转储线程(该线程没有对应的SQL命令)，这个二进制转储线程会读取主库上二进制日志中的事件。它不会对事件进行轮询</li>
<li>如果该二进制线程赶上主库，它将进入睡眠状态，知道主库发送信号量通知其有新的事件产生时才会被唤醒，备库I/O线程将接收到的事件记录到中继日志中</li>
</ul>
</li>
<li><strong>备库的SQL线程执行最后一步，该线程从中继日志中读取事件并在备库执行，从而实现备库数据的更新</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="配置复制"><a href="#配置复制" class="headerlink" title="配置复制"></a>配置复制</h3><ul>
<li><p>步骤描述</p>
<ul>
<li>在每台服务器上创建复制账号</li>
<li>配置主库和备库</li>
<li>通知备库连接到主库并从主库复制数据</li>
</ul>
</li>
<li><p>具体问题分析</p>
<ul>
<li><p>前置条件1</p>
<ul>
<li>主库和备库都是全新安装并且拥有同样的数据，两台服务器server1和server2，给一个已经运行的服务器配置备库，并讨论推荐的复制配置</li>
</ul>
</li>
<li><p>创建复制账号</p>
<ul>
<li>MySQL会赋予一些特殊的权限给复制线程。<ul>
<li>在主库和备库都创建一个用户，并赋予其合适的权限。备库I/O线程以该用户名连接到主库并读取其二进制日志</li>
<li>主库需要REPLICATION CLIENT权限，方便主备切换</li>
<li>创建语句<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CRANT REPLICATION SLAVE,REPLICATION CLIENT ON *.*</span><br><span class="line">-&gt; TO repl@&apos;192.168.0.%&apos; IDENTIFIED BY &apos;p4ssword&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>配置主库和备库</p>
<ul>
<li>主库需要打开二进制日志并指定一个独一无二的服务器ID(server ID),在主库的my.cnf文件中增加或修改如下内容：log_bin = mysql-bin  server_id = 10</li>
</ul>
</li>
<li>启动复制<ul>
<li>告诉备库如何连接到主库并重放其二进制日志，通过CHANGE MASTER T0语句。<pre><code>mysql &gt; CHANGE MASTER TO MASTER_HOST = &apos;server1&apos;,
    &gt; MASTER_USER = &apos;rep1&apos;,
    &gt; MASTER_PASSWORD = &apos;p4ssword&apos;,
    &gt; MASTER_LOG_FILE = &apos;mysql-bin.00001&apos;
    &gt; MASTER_LOG_POS = 0;
</code></pre></li>
</ul>
</li>
<li>前置条件2<ul>
<li>一台已经运行一段时间的主库和一台新安装的备库，此时备库无数据</li>
</ul>
</li>
<li>初始化备库/从其他服务器克隆数据<ul>
<li>从主库复制数据<ul>
<li>保持同步条件<ul>
<li>在某个时间点的主库的数据快照</li>
<li>主库当前的二进制日志文件，和获得数据快照时在该二进制日志文件中的偏移量。SHOW MASTER STATUS</li>
<li>从快照时间到现在的二进制日志</li>
</ul>
</li>
</ul>
</li>
<li>从另外一台备库克隆数据</li>
<li>使用最近的一次备份来启动备库</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="复制拓扑"><a href="#复制拓扑" class="headerlink" title="复制拓扑"></a>复制拓扑</h3><ul>
<li><p>基本原则</p>
<ul>
<li>一个MySQL备库实例只能有一个主库</li>
<li>每个备库必须有一个唯一的服务器ID</li>
<li>一个主库可以有多个备库</li>
<li>如果打开了log_slave_updates选项，一个备库可以把其主库上的数据变化传播到其他备库</li>
</ul>
</li>
<li><p>定制化的复制方案</p>
<ul>
<li>选择性复制</li>
<li>分离功能</li>
<li>数据归档</li>
<li>将备库用作全文检索</li>
<li>只读备库</li>
<li>模拟多主库复制</li>
<li>创建日志服务器  </li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/17/mysql/review/r1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/17/mysql/review/r1/" class="post-title-link" itemprop="url">Review-One</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-17 00:46:39 / 修改时间：00:51:40" itemprop="dateCreated datePublished" datetime="2020-03-17T00:46:39+08:00">2020-03-17</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/ARTS/" itemprop="url" rel="index"><span itemprop="name">ARTS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><ul>
<li><a href="https://itsfoss.com/adobe-alternatives-linux/" target="_blank" rel="noopener">文章来源</a></li>
<li>作者:<a href="https://itsfoss.com/author/ambarish/" target="_blank" rel="noopener">Ambarish Kumar</a></li>
</ul>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><ul>
<li><p><strong>简述:在这篇文章中：我们列举了linux下最好的Adobe替代方法，这些linux下的Adobe全家桶(创建套装)替代方案也都是免费且开源的</strong></p>
</li>
<li><p>现在，在Adobe创意空间中，Adobe提供了一系列的基于Adobe全家桶的软件，它不仅限于PS，还包含许多其他软件，主要在网页设计，logo制作，视频编辑，PDF编辑以及更多方面提供帮助</p>
</li>
<li><p>然而，Adobe全家桶是一个花费你一大笔钱购买专利的软件，并且如果你是一个linux使用者，即使你愿意花这笔钱，平台也获取不到。</p>
</li>
<li><p>在这篇文章中，我们正准备介绍一些linux下优秀的Adobe产品替代品。</p>
</li>
</ul>
<h3 id="linxu下最好的Adobe替代品"><a href="#linxu下最好的Adobe替代品" class="headerlink" title="linxu下最好的Adobe替代品"></a>linxu下最好的Adobe替代品</h3><ul>
<li><p>如果你不在一个阅读文章的氛围中，你可以观看我们YouTube频道，<a href="https://www.youtube.com/c/itsfoss?sub_confirmation=1" target="_blank" rel="noopener">订阅</a>我们YouTube 频道来获取更多Linux相关视频</p>
</li>
<li><p>在这个列表中我确实包含了一个非开源项目，这是因为我真的找不到linux下相近的Adobe Acrobat替代品</p>
</li>
<li><p>除此之外，我们开始吧！</p>
</li>
</ul>
<h3 id="1-GIMP-PS的替代品"><a href="#1-GIMP-PS的替代品" class="headerlink" title="1.GIMP:PS的替代品"></a><strong>1.GIMP:PS的替代品</strong></h3><ul>
<li>PS对于正规专业的使用者老说是一款最受欢迎并且使用广泛的制图编辑工具。它是一款对于照片编辑，网页设计和图形创作者极致的工具</li>
<li>当谈及PS替代品时，GIMP提供了最好的替代</li>
<li>在GNU/Linux,Mac，Windows和其他操作系统上，GIMP是一款免费获取，开源的图像编辑。它提供了少量复杂的工具使得图形设计和摄影师的工作更简单。</li>
<li>从高质量的照片处理到普通的艺术创作，GIMP包含创建图标，图形设计元素，色彩管理特性等选择。并且跟随第三方插件的定制化选择使你的工作更简单。</li>
<li>可能GIMP已经在你的系统上安装了，如果没有，你可以在办公软件仓库中搜索来安装GIMP</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/15/mysql/高性能MySQL(六)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/15/mysql/高性能MySQL(六)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(六)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-15 20:07:10 / 修改时间：22:00:43" itemprop="dateCreated datePublished" datetime="2020-03-15T20:07:10+08:00">2020-03-15</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="创建高性能索引-下"><a href="#创建高性能索引-下" class="headerlink" title="创建高性能索引(下)"></a>创建高性能索引(下)</h1><h2 id="MySQL查询的局限性"><a href="#MySQL查询的局限性" class="headerlink" title="MySQL查询的局限性"></a>MySQL查询的局限性</h2><ul>
<li>异史氏曰: 所有局限性应当遵循版本是否修复相应功能。以下列举列举了本书中的具体例子</li>
<li>关联子查询<ul>
<li>MySQL将相关的外层表压到子查询中</li>
<li>用测试来验证对子查询的执行计划和响应时间</li>
</ul>
</li>
<li>UNION的限制<ul>
<li>无法将限制条件从外层”下推”到内层</li>
<li>MySQL会将两个表都存放到同一个临时表中,然后再取出</li>
</ul>
</li>
<li>索引合并优化</li>
<li>等值传递</li>
<li>并行执行</li>
<li>哈希关联</li>
<li>松散索引扫描</li>
<li>最大值和最小值优化</li>
<li>在同一个表上查询和更新</li>
</ul>
<h2 id="查询优化器的提示-hint"><a href="#查询优化器的提示-hint" class="headerlink" title="查询优化器的提示(hint)"></a>查询优化器的提示(hint)</h2><ul>
<li>如果对优化器选择的执行计划不满意，可以使用优化器的几个提示(hint)来控制最终的执行计划</li>
<li>MySQL升级时，优化器提示可能就会失效，即使用前查询相关版本</li>
</ul>
<h2 id="优化特定类型的查询"><a href="#优化特定类型的查询" class="headerlink" title="优化特定类型的查询"></a>优化特定类型的查询</h2><ul>
<li>COUNT()<ul>
<li>作用<ul>
<li>统计某个列的数量，也可以统计行数。在统计列值时要求列值时非空的(不统计NULL)，如果括号中指定了列或列的表达式，则统计的就是整个表达式有值的结果数</li>
<li>统计结果集的行数</li>
</ul>
</li>
</ul>
</li>
<li>优化关联查询<ul>
<li>确保ON或者USING子句中的列上有索引。</li>
<li>确保任何的GROUP BY和ORDER BY中的表达式值涉及到一个表中的列，这样MySQL才能用索引来优化这个过程</li>
<li>升级注意</li>
</ul>
</li>
<li>优化子查询<ul>
<li>5.6之前尽量用关联查询替代</li>
</ul>
</li>
<li>优化GROUP BY和DISTINCT</li>
<li>优化LIMIT分页<ul>
<li>尽可能使用索引覆盖扫描，而不是查询所有列</li>
</ul>
</li>
<li>使用用户自定义变量<ul>
<li>不能使用<ul>
<li>无法查询缓存</li>
<li>不能在使用常量或标识符的地方使用</li>
<li>用户自定义变量生命周期为一个连接，不能做连接间的通信</li>
<li>尽量不要在连接池或持久化连接中使用</li>
<li>代码版本兼容性问题</li>
<li>不能显示地声明自定义变量的类型</li>
<li>赋值表达式应使用括号</li>
<li>使用未定义变量不会产生任何语法错误</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="优化总结"><a href="#优化总结" class="headerlink" title="优化总结"></a>优化总结</h2><ul>
<li>不做，少做，快速做</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/01/mysql/高性能MySQL(四)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/01/mysql/高性能MySQL(四)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(四)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-01 21:12:10 / 修改时间：22:48:01" itemprop="dateCreated datePublished" datetime="2020-03-01T21:12:10+08:00">2020-03-01</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="创建高性能索引-下"><a href="#创建高性能索引-下" class="headerlink" title="创建高性能索引(下)"></a>创建高性能索引(下)</h1><h2 id="高性能索引策略"><a href="#高性能索引策略" class="headerlink" title="高性能索引策略"></a>高性能索引策略</h2><ul>
<li>独立的列<ul>
<li>索引列不能是表达式的一部分，也不能是函数的参数</li>
</ul>
</li>
<li>前缀索引与索引的选择性<ul>
<li>索引的选择性<ul>
<li>不重复的索引值(也称为基数)和数据表的记录总数(#T)的比值，范围从1/#T到1之间,索引的选择性越高，查询效率越高</li>
</ul>
</li>
<li>前缀索引<ul>
<li>足够长的前缀，保证其能代表唯一的索引，即前缀的基数接近于完整列的”基数”</li>
</ul>
</li>
</ul>
</li>
<li>索引列顺序<ul>
<li>在不考虑排序和分组时,将选择性最高的列放到索引最前列</li>
</ul>
</li>
<li>聚簇索引<ul>
<li>聚簇索引并不是一种单独的索引类型，而是一种数据存储方式，具体的细节依赖与其实现方式，在InnoDB中保存了数据行和B-Tree索引</li>
<li>当表有聚簇索引时，他的数据行实际上存放在索引的叶子页中</li>
<li>聚簇表示数据行与相邻的键值紧凑地存储在一起</li>
</ul>
</li>
<li>覆盖索引<ul>
<li>一个索引包含所有需要查询的字段的值，其必须存储索引列的值。</li>
<li>MySQL只能使用B-Tree索引做覆盖索引</li>
<li>覆盖索引只能覆盖那些值访问索引中部分列的查询</li>
</ul>
</li>
<li>重复与冗余<ul>
<li>重复索引是指在相同的列上按照相同的顺序创建的相同类型的索引</li>
<li>解决方法<ul>
<li>使用shlomi Noach的common_schema中的一些视图来定位。</li>
<li>使用Percona Toolkit中的pt-duplicate-keychecker</li>
</ul>
</li>
</ul>
</li>
<li>维护索引和表<ul>
<li>找到并修复损坏的表</li>
<li>维护准确的索引统计信息</li>
<li>减少索引和数据的碎片<ul>
<li>行碎片(InnoDB没有)<ul>
<li>数据行被存储为多个地方的多个片段中  </li>
</ul>
</li>
<li>行间碎片<ul>
<li>逻辑上顺序的页，或者行在磁盘上不是顺序存储的。对全表扫描和聚簇索引操作影响较大  </li>
</ul>
</li>
<li>剩余空间碎片<ul>
<li>数据页中有大量的空余空间</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>三大原则<ul>
<li>单行访问很慢。最好读取的块中能包含尽可能多所需的行，使用索引可以创建位置引用以提升效率</li>
<li>按顺序访问范围数据很快<ul>
<li>顺序I/O不需要多次磁盘寻道</li>
<li>如果服务器能按需顺序读取数据，那么就不需要多余的操作了</li>
</ul>
</li>
<li>索引覆盖查询是很快的</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/03/01/mysql/高性能MySQL(五)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/01/mysql/高性能MySQL(五)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(五)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-01 21:12:10" itemprop="dateCreated datePublished" datetime="2020-03-01T21:12:10+08:00">2020-03-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-08 21:53:36" itemprop="dateModified" datetime="2020-03-08T21:53:36+08:00">2020-03-08</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="查询性能优化-上"><a href="#查询性能优化-上" class="headerlink" title="查询性能优化(上)"></a>查询性能优化(上)</h1><h2 id="章节概述"><a href="#章节概述" class="headerlink" title="章节概述"></a>章节概述</h2><h3 id="本章主要内容"><a href="#本章主要内容" class="headerlink" title="本章主要内容"></a>本章主要内容</h3><ul>
<li>发现查询效率不高时需要考虑的因素</li>
<li>查询优化技巧</li>
<li>MySQL优化机制<ul>
<li>如何执行查询</li>
<li>如何去改变查询的执行计划</li>
</ul>
</li>
<li>MySQL优化器的不足，并探索查询优化的模式</li>
</ul>
<h3 id="主要目的"><a href="#主要目的" class="headerlink" title="主要目的"></a>主要目的</h3><p>深刻理解MySQL如何真正地执行查询，高效和低效的原因</p>
<h2 id="为什么查询会慢"><a href="#为什么查询会慢" class="headerlink" title="为什么查询会慢"></a>为什么查询会慢</h2><p>异史氏曰：在查询的过程(生命周期)中，响应时间的变化导致查询变慢，具体到每个子任务操作的响应时间。</p>
<h2 id="慢查询的基础-优化数据访问"><a href="#慢查询的基础-优化数据访问" class="headerlink" title="慢查询的基础:优化数据访问"></a>慢查询的基础:优化数据访问</h2><ul>
<li>向数据库请求了不需要的数据</li>
<li>扫描了额外的记录<ul>
<li>指标介绍<ul>
<li>响应时间<ul>
<li>服务时间：数据库处理这个数据真正的花的时间</li>
<li>排队时间：服务器等待资源执行子任务的时间</li>
</ul>
</li>
<li>扫描的行数</li>
<li>返回的行数</li>
</ul>
</li>
</ul>
</li>
<li>查询大量行的数据行但只返回少数的行的优化技巧<ul>
<li>使用索引覆盖扫描，把所有需要用到的列都放到索引中，这样存储引擎无需徽标获取对应行就可以返回结果</li>
<li>改变库表结构</li>
<li>重写这个复杂的查询</li>
</ul>
</li>
</ul>
<h2 id="重构查询的方式"><a href="#重构查询的方式" class="headerlink" title="重构查询的方式"></a>重构查询的方式</h2><ul>
<li>选择正确的查询次数</li>
<li>切分查询</li>
<li>分解关联查询</li>
</ul>
<h2 id="查询执行的基础"><a href="#查询执行的基础" class="headerlink" title="查询执行的基础"></a>查询执行的基础</h2><ul>
<li>一个MySQL请求的运行过程<ul>
<li>客户端发送一条查询给服务器</li>
<li>服务器线检查查询缓存，如果命中缓存，则直接返回缓存中的结果，否则，进入下一阶段</li>
<li>服务器进行MySQL解析，预处理，再由优化器生成对应的执行计划</li>
<li>MySQL根据优化器生成的执行计划，调用存储引擎API执行查询</li>
<li>将结果返回给客户端</li>
</ul>
</li>
<li>MySQL查询状态<ul>
<li>Command: SHOW FULLPROCESSLIST</li>
<li>介绍<ul>
<li>Sleep:线程正等待客户端发送新请求</li>
<li>Query:线程正执行查询或正在将结果发送给客户端</li>
<li>Locked:在MySQL服务器层，该线程再在等待表锁。</li>
<li>Analyzing and statistics:线程正在收集存储引擎的统计信息，并生成查询执行计划</li>
<li>Copying to tmp table [on disk]<ul>
<li>线程正在执行查询，并且将其结果集都复制到一个临时表中。</li>
<li>一般时GROUP BY操作，要么时文件排序操作，或者UNION操作</li>
</ul>
</li>
<li>Sorting result<ul>
<li>线程正在对结果集进行排序</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>MySQL能够处理的优化类型<ul>
<li>重新定义表关联顺序</li>
<li>将外连接转化为内连接</li>
<li>使用等价变换规则</li>
<li>优化COUNT(),MIN(),MAX()</li>
<li>预估并转化为常数表达式</li>
<li>覆盖索引扫描</li>
<li>子查询优化</li>
<li>提前终止查询</li>
<li>等值传播</li>
<li>列表IN()的比较</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/02/24/mysql/MySQL基础知识普及/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/02/24/mysql/MySQL基础知识普及/" class="post-title-link" itemprop="url">MySQL基础知识普及</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-24 09:34:10" itemprop="dateCreated datePublished" datetime="2020-02-24T09:34:10+08:00">2020-02-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-01 23:02:40" itemprop="dateModified" datetime="2020-03-01T23:02:40+08:00">2020-03-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">753</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MySQL基础知识普及"><a href="#MySQL基础知识普及" class="headerlink" title="MySQL基础知识普及"></a>MySQL基础知识普及</h1><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><ul>
<li>为了更好的进行高性能MySQL系列的阅读，由此以《MySQL必知必会》为蓝本进行一次MySQL基础知识的大排查</li>
</ul>
<h2 id="概念普及"><a href="#概念普及" class="headerlink" title="概念普及"></a>概念普及</h2><ul>
<li>数据库<ul>
<li>数据库是一个以某种有组织的方式存储的数据集合</li>
<li>通过数据库软件(DBMS)进行数据库的操作</li>
<li>(个言)简而言之，就是有规则的存放相关资料的场所</li>
</ul>
</li>
<li>表(table)<ul>
<li>表是一种结构化的文件，可以用来存储某种特定类型的数据</li>
<li>存储在表中的数据是一种类型的数据或一个清单</li>
<li>表名具有唯一性，表的特性定义了数据在表中如何存储，如可以存储什么样的数据，数据如何分解，各部分信息如何命名</li>
</ul>
</li>
<li>模式(schema)<ul>
<li>关于数据库和表的布局及特性的信息</li>
</ul>
</li>
<li>列(column)<ul>
<li>表中的一个字段，所有表都是由一个或多个列组成</li>
<li>每个列都有相应的数据类型</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/02/23/mysql/高性能MySQL(三)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/02/23/mysql/高性能MySQL(三)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(三)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-23 23:30:10" itemprop="dateCreated datePublished" datetime="2020-02-23T23:30:10+08:00">2020-02-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-02-24 09:34:24" itemprop="dateModified" datetime="2020-02-24T09:34:24+08:00">2020-02-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.8k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="创建高性能索引（上）"><a href="#创建高性能索引（上）" class="headerlink" title="创建高性能索引（上）"></a>创建高性能索引（上）</h1><h2 id="索引基础"><a href="#索引基础" class="headerlink" title="索引基础"></a>索引基础</h2><h3 id="索引的定义"><a href="#索引的定义" class="headerlink" title="索引的定义"></a>索引的定义</h3><ul>
<li>索引是存储引擎快速找到数据的一种数据结构。<ul>
<li>类似书本的索引目录</li>
</ul>
</li>
</ul>
<h3 id="运行机制"><a href="#运行机制" class="headerlink" title="运行机制"></a>运行机制</h3><ul>
<li>现在索引中找到对应的值，然后根据对应的值检索所有对应的行</li>
</ul>
<h3 id="索引的类型"><a href="#索引的类型" class="headerlink" title="索引的类型"></a>索引的类型</h3><ul>
<li>B-Tree索引<ul>
<li>所有的值都是按顺序存储，并且每一个叶子页到根的距离相同</li>
<li>B-Tree索引加快访问速度<ul>
<li>从根节点出发，由根槽中指向叶子节点的指针，存储引擎根据指针向下查找</li>
<li>索引列是顺序组织存储，很适合查找范围数据<ul>
<li>索引对多个值排序的一句是CREATE TABLE创建的顺序</li>
</ul>
</li>
</ul>
</li>
<li>查询类型<ul>
<li>全键值</li>
<li>键值范围</li>
<li>键前缀查找（最左前缀）</li>
<li>有效<ul>
<li>全值匹配</li>
<li>匹配最左前缀</li>
<li>匹配列前缀</li>
<li>匹配范围值</li>
<li>精确匹配某一列并范围匹配另外一列</li>
<li>只访问索引的查询</li>
</ul>
</li>
<li>限制<ul>
<li>如果不是按照索引的最左列开始查找，则无法使用索引</li>
<li>不能跳过索引的列</li>
<li>如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查找</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>哈希索引<ul>
<li>基于哈希表实现，只有精确匹配索引所有列的查询才有效。对于每一行数据，存储引擎都会对所有的索引列计算一个哈希码。哈希索引将所有哈希码存储在索引中，同时在哈希表中保存指向每个数据行的指针，Memory，NDB集群支持</li>
<li>限制<ul>
<li>只包含哈希值和行指针，而不存储字段值，所以不能使用索引中的值来避免读取行。</li>
<li>并不是按照索引值顺序存储，所以也就无法用于排序</li>
<li>不支持部分索引列匹配查找，始终使用索引列的全部内容来计算哈希值</li>
<li>只支持等级比较查询，也不支持任何范围查询</li>
<li>访问哈希索引的数据非常快，除非有很多哈希冲突</li>
<li>如果哈希冲突很多的话，一些索引维护操作的代价也很高</li>
</ul>
</li>
</ul>
</li>
<li>空间数据索引（R-Tree）<ul>
<li>MyISAM支持</li>
<li>PostgreSQL的PostGIS更好</li>
</ul>
</li>
<li>全文索引<ul>
<li>查找文本中的关键词</li>
</ul>
</li>
</ul>
<h2 id="索引的优点"><a href="#索引的优点" class="headerlink" title="索引的优点"></a>索引的优点</h2><ul>
<li>索引大大减少了服务器需要扫描的数据量</li>
<li>索引可以帮助服务器避免排序和临时表</li>
<li>索引可以将随机I/O变为顺序I/O</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/02/16/mysql/高性能MySQL(二)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/02/16/mysql/高性能MySQL(二)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(二)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-16 23:30:10" itemprop="dateCreated datePublished" datetime="2020-02-16T23:30:10+08:00">2020-02-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-03-17 00:21:36" itemprop="dateModified" datetime="2020-03-17T00:21:36+08:00">2020-03-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.2k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">2 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Schema与数据类型优化"><a href="#Schema与数据类型优化" class="headerlink" title="Schema与数据类型优化"></a>Schema与数据类型优化</h1><h2 id="数据类型选择原则"><a href="#数据类型选择原则" class="headerlink" title="数据类型选择原则"></a>数据类型选择原则</h2><ul>
<li>更小的通常更好(不会超过范围的最小类型)</li>
<li>简单就好</li>
<li>尽量避免NULL</li>
</ul>
<h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><ul>
<li><p>整数类型：TINYINT,SMALLINT,MEDIUMINT,INT,BIGINT</p>
</li>
<li><p>存储空间(依次)：8，16，24，32，64</p>
</li>
<li><p>取值范围：<br>$$<br>-2^{n-1} 到 2^{n-1}-1<br>$$</p>
</li>
<li><p>整数类型可选UNSIGNED表述非负数，一般使用64为的BIGINT</p>
</li>
</ul>
<h3 id="实数类型"><a href="#实数类型" class="headerlink" title="实数类型"></a>实数类型</h3><ul>
<li>FLOAT/DOUBLE类型支持使用标准的浮点数</li>
<li>DECIMAL类型用于存储精确小数，最多允许65隔数</li>
</ul>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><ul>
<li>VARCHAR <ul>
<li>用于存储可变长字符串，比定长类型更节省空间</li>
</ul>
</li>
<li>CHAR<ul>
<li>定长，适合存储短字符串，或者所有值近似一个长度</li>
</ul>
</li>
<li>BLOB/TEXT<ul>
<li>为存储很大的数据而设计的字符串数据类型，分别采用二进制和字符方式存储。</li>
<li>独立对象；</li>
<li>不同：字符集和排序规则(存无)</li>
</ul>
</li>
<li>使用枚举（ENUM）代替字符串类型</li>
</ul>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><ul>
<li>DATETIME<ul>
<li>这个类型能保存大范围的值，从1001年到9999年，精度为秒。它把日期和时间封装到格式为YYYYMMDDHHMMSS的整数中，与时区无关，使用8个字节的存储空间。</li>
</ul>
</li>
<li>TIMESTAMP（通用）<ul>
<li>TIMESTAMP类型保存了从1970年1月1日午夜（格林尼治标准时间）以来的秒数，它和UNIX时间戳相同，只使用4个字节的存储空间，它的范围比DATETIME小得多：只能表示从1970年到2038年。MySQL提供FROM_UNIXTIME()函数把Unix时间戳转换为日期，并提供了UNIX_TIMESTAMP()函数把日期转换为Unix时间戳，受时区影响。</li>
</ul>
</li>
</ul>
<h3 id="位数据类型"><a href="#位数据类型" class="headerlink" title="位数据类型"></a>位数据类型</h3><ul>
<li>BIT</li>
<li>SET</li>
</ul>
<h3 id="选择标识符"><a href="#选择标识符" class="headerlink" title="选择标识符"></a>选择标识符</h3><h3 id="特殊类型数据"><a href="#特殊类型数据" class="headerlink" title="特殊类型数据"></a>特殊类型数据</h3><h2 id="Schema设计中的陷阱"><a href="#Schema设计中的陷阱" class="headerlink" title="Schema设计中的陷阱"></a>Schema设计中的陷阱</h2><ul>
<li>太多的列</li>
<li>太多的关联</li>
<li>全能的枚举</li>
<li>变相的枚举</li>
</ul>
<h2 id="缓存表和汇总表"><a href="#缓存表和汇总表" class="headerlink" title="缓存表和汇总表"></a>缓存表和汇总表</h2><ul>
<li>提升性能的最好方法:同一张表保存衍生的冗余数据</li>
<li>缓存表： 存储那些可以比较简单从schema其他表中获取数据的表（慢）</li>
<li>汇总表：GROUP BY聚合数据的表</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://http://msca42.site/2020/02/09/mysql/高性能MySQL(一)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="msca">
      <meta itemprop="description" content="丝竹响彻无忧宫，独倚斜阳一醉翁">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="msca.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/02/09/mysql/高性能MySQL(一)/" class="post-title-link" itemprop="url">高性能MySQL读书笔记(一)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-02-09 19:36:10 / 修改时间：19:46:34" itemprop="dateCreated datePublished" datetime="2020-02-09T19:36:10+08:00">2020-02-09</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">7 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MySQL架构与历史"><a href="#MySQL架构与历史" class="headerlink" title="MySQL架构与历史"></a>MySQL架构与历史</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="MySQL为什么与众不同？"><a href="#MySQL为什么与众不同？" class="headerlink" title="MySQL为什么与众不同？"></a>MySQL为什么与众不同？</h3><ul>
<li>多场景下的适用性（灵活性）<ul>
<li><strong>不同的存储引擎</strong></li>
<li>各种硬件环境</li>
<li>支持多种数据类型</li>
</ul>
</li>
<li>嵌入式数据库</li>
<li>数据库服务器<ul>
<li>支持高可用冗余系统</li>
<li>支持在线事务处理</li>
</ul>
</li>
</ul>
<h2 id="存储架构"><a href="#存储架构" class="headerlink" title="存储架构"></a>存储架构</h2><h3 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a>架构图</h3><p><img src="/images/mysql架构.png" alt="MySQL架构"></p>
<p> <strong>图片来源</strong> ：《极客时间》-《MySQL实战45讲》- 01</p>
<h3 id="层次与组件分析"><a href="#层次与组件分析" class="headerlink" title="层次与组件分析"></a>层次与组件分析</h3><ul>
<li><p><strong>Server</strong></p>
<ul>
<li><p><strong>连接器</strong>： 连接处理，授权认证，安全权限</p>
<blockquote>
<p>每个客户端连接都会在服务器进程中拥有一个<strong>线程</strong>,这个连接的查询只会在这个单独的线程中执行，该线程只能轮流在某个CPU核心或CPU中运行。服务器会负责<strong>缓存</strong>线程，因此不需要为每个新建的连接创建或销毁线程。</p>
</blockquote>
</li>
<li><p>太史曰： 上述是一种线程池的概念,所谓线程池，就是实现创建好许多线程，在每个客户端连接服务器的时候总有一个线程与之对应即可。</p>
</li>
<li>认证<ul>
<li>一般基于用户名，原始主机信息和密码。</li>
<li>SSL连接采用X.509证书认证。</li>
</ul>
</li>
<li>权限检查</li>
<li><strong>查询缓存</strong>：缓存完整的SELECT查询结果<ul>
<li>当查询命中时，立刻返回结果，跳过解析，优化，执行阶段</li>
<li>如何判断命中缓存？<ul>
<li>缓存存放在一个引用表中，通过一个哈希值引用；</li>
<li>哈希值包括：查询本身，当前要查询的数据库，客户端协议的版本等</li>
</ul>
</li>
</ul>
</li>
<li><strong>分析器</strong>:  创建解析树，并进行词法和语法分析</li>
<li><strong>优化与执行:（简要介绍，TODO chapter 6）</strong><ul>
<li>重写查询，决定表的读取顺序，选择合适的索引</li>
<li>通过关键字提示(hint)优化器，影响它的决策过程</li>
<li>请求优化器解释(explain)优化过程的各个因素</li>
</ul>
</li>
</ul>
</li>
<li><strong>存储引擎</strong></li>
</ul>
<h2 id="并发及其相关问题"><a href="#并发及其相关问题" class="headerlink" title="并发及其相关问题"></a>并发及其相关问题</h2><ul>
<li><strong>并发控制：</strong> 在处理并发读或者写时，通过一个由两种类型锁组成的锁系统。<ul>
<li><strong>读写锁</strong><ul>
<li><strong>读锁</strong>：互不阻塞，互不干扰，共享锁</li>
<li><strong>写锁</strong>：阻塞其他锁，排他锁</li>
</ul>
</li>
<li><strong>锁粒度</strong><ul>
<li>目的：提高并发性</li>
<li>方式：修改锁定的数据片精度，锁定的数据量越小，并发程度越高</li>
</ul>
</li>
<li><strong>锁策略</strong>：在锁的开销和数据的安全性之间寻找平衡，影响性能。<ul>
<li><strong>表锁</strong>：最基本，开销最小，<strong>锁定整张表</strong> ，写锁优先级更高</li>
<li><strong>行级锁</strong>：最大程度支持并发，锁开销最大</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><ul>
<li>事务是什么？<ul>
<li>一组原子性的SQL查询，或者说一个独立的工作单元</li>
</ul>
</li>
<li><strong>ACID</strong>:<ul>
<li><strong>原子性</strong><ul>
<li>一个事务必须被视为一个不可分割的最小工作单元，整个事务中的所有操作要么全部提交成功，要么全部失败回滚</li>
</ul>
</li>
<li><strong>一致性</strong><ul>
<li>数据库总是从一个一致性状态转到另一个一致性状态</li>
</ul>
</li>
<li><strong>隔离性</strong><ul>
<li>一个事务所作的修改在最终提交之前，对其他事务是不可见的</li>
</ul>
</li>
<li><strong>持久性</strong><ul>
<li>一旦事务提交，则其所做的修改就会永久保存在数据库中</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>隔离级别</strong></p>
<ul>
<li>观察点：一个事务中所做的修改，在事务内部和事务间可见或不可见</li>
<li><p>分类与缺陷：</p>
<ul>
<li><strong>读未提交</strong>：事务的修改，即使没有提交，对其他事务也是可见的<ul>
<li><strong>脏读</strong>：事务可以读取未提交的数据</li>
</ul>
</li>
<li><strong>读提交</strong>：（大多数数据库采用） 一个事务开始时，只能看见已提交的事务所作的修改<ul>
<li><strong>不可重复读</strong>：一个事务从开始到提交，所作的任何修改对其他事务都是不可见的，即执行两次查询操作得到的结果可能不同</li>
</ul>
</li>
<li><strong>可重复读</strong>：保证了在同一事务中多次读取的数据一致（MySQL默认）<ul>
<li><strong>幻读</strong>：当某个事务在读取某个范围内的记录时，另一个事务又在该范围内插入新的记录，当之前的事务再次读取该范围的记录时，会产生幻行</li>
<li>幻读通过多版本并发控制(MVCC)解决</li>
</ul>
</li>
<li><strong>串行化</strong>：强制事务串行执行</li>
</ul>
</li>
<li><p><strong>死锁</strong>：两个或多个事务在同一资源上相互占用，并请求对方占用的资源，从而导致恶性循环的过程</p>
</li>
<li>解决方法<pre><code>- 死锁检测：InnoDB将持有最少行级排他锁的事务进行回滚
- 死锁超时机制
</code></pre></li>
<li><strong>事务日志</strong>：<ul>
<li>存储引擎在修改表的数据时只需要修改器内存拷贝，再把该修改行记录到硬盘上的事务日志中，而不用每次都将修改的数据存储在磁盘上。</li>
<li>事务日志采用追加写入，所以磁盘小区域顺序I/O</li>
<li>事务日志持久后，内存中修改的数据慢慢回刷到磁盘，两次写入</li>
</ul>
</li>
<li>MySQL中的事务：<ul>
<li>事务存储引擎：InnoDB,NDB Cluster</li>
<li>自动提交：每个查询可以看作一个事务</li>
<li>InnoDB采用两阶段锁定协议:随时上锁，锁只有在COMMIT或ROLLBACK的时候才会释放。（隐式+显式）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="多版本并发控制（MVCC）"><a href="#多版本并发控制（MVCC）" class="headerlink" title="多版本并发控制（MVCC）"></a>多版本并发控制（MVCC）</h2><ul>
<li>简介<ul>
<li>通过保存数据在某个时间点的快照来实现。</li>
<li>行级锁的变种，典型：乐观锁，悲观锁</li>
<li>不管需要指定多长时间，每个事务看到的数据都是一致的。根据事务开始的时间不同，每个事务对同一张表，同一时刻看到的数据可能是不一样的。</li>
<li>只在可重复读和读已提交下工作</li>
</ul>
</li>
<li>InnoDB的MVCC<ul>
<li>通过在每行记录后面保存两个隐藏的列来实现。</li>
<li>一个保存了行的创建时间，一个保存行的过期时间（删除时间）。</li>
<li>记录的是系统版本号，开始一个新事务，版本号递增</li>
<li>事务开始时刻的版本号会作为事务的版本号</li>
<li>具体操作：<ul>
<li>SELECT<ul>
<li>只查找版本早于当前事务版本的数据行。</li>
<li>行的删除版本要么未定义，要么大于当前事务版本号。</li>
</ul>
</li>
<li>INSERT<ul>
<li>新插入的每一行保存当前系统版本号作为行版本号</li>
</ul>
</li>
<li>DELETE<ul>
<li>删除的每一行保存当前系统版本号作为行删除标识</li>
</ul>
</li>
<li>UPDATE<ul>
<li>插入新数据，保存当前系统版本号作为行版本号，同时保存当前系统版本号到原来的行作为删除版本号</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="MySQL存储引擎"><a href="#MySQL存储引擎" class="headerlink" title="MySQL存储引擎"></a>MySQL存储引擎</h2><ul>
<li>概述<ul>
<li>MySQL将每个数据库（schema）保存为数据目录下的一个子目录。</li>
<li>创建表时，会在数据库子目录下创建一个和表同名的.frm文件保存表的定义</li>
</ul>
</li>
</ul>
<h3 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h3><ul>
<li>概述<ul>
<li>数据存储在表空间</li>
<li>默认可重复读，通过间隙锁策略防止幻读。间隙锁不仅锁定查询涉及的行，还会对索引中的间隙进行锁定</li>
<li>InnoDB表通过聚簇索引建立</li>
<li>支持热备份</li>
<li>可预测性预读：能够自动在内存中创建hash索引以加速读操作的自适应哈希索引，以及能够加速插入操作的插入缓冲区</li>
</ul>
</li>
</ul>
<h3 id="转换表的引擎"><a href="#转换表的引擎" class="headerlink" title="转换表的引擎"></a>转换表的引擎</h3><ul>
<li><p>ALTER TABLE</p>
<p>  ALTER TABLE mytable ENGINE = InnoDB</p>
</li>
<li><p>导出与导入</p>
<ul>
<li>使用mysqldump工具将数据导出到文件，然后修改文件中CREATE TABLE语句的存储引擎选项</li>
</ul>
</li>
<li><p>创建与查询</p>
<ul>
<li>先创建一个新的存储引擎的表，然后利用INSERT…SELECT语法倒数据</li>
</ul>
</li>
</ul>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="一-数据库服务器与嵌入式数据库的区别？"><a href="#一-数据库服务器与嵌入式数据库的区别？" class="headerlink" title="一.数据库服务器与嵌入式数据库的区别？"></a>一.数据库服务器与嵌入式数据库的区别？</h3><ul>
<li>运行地址空间不同<ul>
<li>数据库服务器独立运行一个守护进程</li>
<li>嵌入式数据库与应用程序运行在一个进程</li>
</ul>
</li>
<li>架构不同<ul>
<li>数据库服务器C/S结构，需要驱动程序，通过TCP/IP通讯</li>
<li>嵌入式数据库直接将库文件链接到应用程序中，通过API访问数据</li>
</ul>
</li>
</ul>
<h3 id="二-SSL-TODO"><a href="#二-SSL-TODO" class="headerlink" title="二.SSL(TODO)"></a>二.SSL(TODO)</h3><h3 id="三-长连接与短连接"><a href="#三-长连接与短连接" class="headerlink" title="三. 长连接与短连接"></a>三. 长连接与短连接</h3><ul>
<li>长连接<ul>
<li>连接成功后，如果客户端持续由请求，则一直使用同一个连接</li>
<li>MySQL在执行过程中临时使用的内存是管理在连接对象中，所以长连接容易OOM</li>
</ul>
</li>
<li>短连接<ul>
<li>每次执行完很少的几次查询就断开连接，下次查询再重新建立一个</li>
</ul>
</li>
</ul>
<h3 id="四-InnoDB表空间"><a href="#四-InnoDB表空间" class="headerlink" title="四.InnoDB表空间"></a>四.InnoDB表空间</h3><ul>
<li>共享表空间<ul>
<li>整个数据库的表数据和索引存储在一个文件中，默认放在/usr/local/mysqldata中，每一个表有一个.frm表描述文件，放在mysqldata下的具体数据库目录；</li>
</ul>
</li>
<li>独占表空间<ul>
<li>在mysqldata/yourdatabase下，每一个表都有一个.frm表描述文件，还有一个.ibd，每个表的数据和索引单独存放在以表命名的ibd文件中；</li>
</ul>
</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a href="[https://blog.csdn.net/skh2015java/article/details/78770596](https://blog.csdn.net/skh2015java/article/details/78770596"> 嵌入式数据库和数据库服务器的区别 </a>)</p>
</li>
<li><p><a href="[https://time.geekbang.org/column/article/68319](https://time.geekbang.org/column/article/68319"> MySQL实战45讲 - 01 基础架构</a>)</p>
</li>
<li><p><a href="[https://blog.csdn.net/hrbhanyu/article/details/61196443](https://blog.csdn.net/hrbhanyu/article/details/61196443">使用SSL安全连接数据库</a>)</p>
</li>
<li><p><a href="https://www.cnblogs.com/Richardzhu/p/3318595.html" target="_blank" rel="noopener">MySQL之权限管理</a></p>
</li>
<li><p><a href="https://juejin.im/post/5c91b5d7e51d456f957ebd10" target="_blank" rel="noopener">一条SQL语句在MySQL中是如何执行的</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/28780660" target="_blank" rel="noopener">MySQL InnoDB表空间基本概念</a></p>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    
	<div>
	
	</div>
    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/logo.jpg" alt="msca">
            
              <p class="site-author-name" itemprop="name">msca</p>
              <p class="site-description motion-element" itemprop="description">丝竹响彻无忧宫，独倚斜阳一醉翁</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">标签</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/msca42" title="GitHub &rarr; https://github.com/msca42" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:msca5238@gmail.com" title="E-Mail &rarr; mailto:msca5238@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-globe"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://coolshell.cn/" title="https://coolshell.cn/" rel="noopener" target="_blank">酷壳</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.allhistory.com/" title="https://www.allhistory.com/" rel="noopener" target="_blank">全历史</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.gutenberg.org/" title="http://www.gutenberg.org/" rel="noopener" target="_blank">古登堡</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="http://www.ruanyifeng.com/blog/" rel="noopener" target="_blank">阮一峰的网络日志</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">msca</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">18k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">16 分钟</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.0"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>


  
  


<!-- LOCAL: You can save these files to your site and update links -->

  
     <!-- <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js"></script> -->
<script src="https://billts.site/js/gitment.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.css"/> -->
<link rel="stylesheet" href="https://billts.site/extra_css/gitment.css">
<!-- END LOCAL -->

<style>
#gitment-container a {
  border-bottom: none;
}

</style>

<script>
  function renderGitment() {
    var gitment = new Gitment({
      id: '',
      owner: 'msca42',
      repo: 'msca42.github.io',
      
      oauth: {
      
      
        client_secret: '404ed506ef6aa9b73fa3dfb0a5fb5fb3e140300a',
      
        client_id: '89a7384990192e9cf857'
      }
    });
    gitment.render('gitment-container');
  }

  
    renderGitment();
  
</script>

  




  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
